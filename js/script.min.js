const form=document.querySelector(".form"),backButton=document.querySelector(".btn--back"),progressIndicators=document.querySelectorAll(".progress__indicator"),background1=document.querySelector(".background--1"),background2=document.querySelector(".background--2"),errorMessage=document.querySelector(".error-message"),dropdownInput=document.querySelector(".form__input--dropdown"),dropdownItem=document.querySelectorAll(".dropdown__item"),dateOfBirthInput=document.querySelector(".form__input--date-of-birth");let progress=0;window.innerWidth>1200&&document.addEventListener("mousemove",e=>{document.querySelectorAll(".parallax").forEach(t=>{const r=parseFloat(t.getAttribute("data-depth")),a=(e.pageX-window.innerWidth/2)/r,n=(e.pageY-window.innerHeight/2)/r;t.style.transform=`translate(calc(-50% - ${a}px), calc(-50% - ${n}px))`})}),window.innerWidth<=900&&(document.querySelector(".loading__container").innerHTML='<div class="loading__element loading__element--1"></div>\n                <div class="loading__element loading__element--2"></div>\n                <div class="loading__element loading__element--3"></div>\n                <div class="loading__element loading__element--4"></div>');const init=()=>{document.querySelectorAll(".form__input")[0].focus(),displayBackbutton(),document.querySelectorAll(".icon-next").forEach(e=>{e.addEventListener("click",nextArrowClicked)}),backButton.addEventListener("click",()=>{const e=document.querySelector(".form__group--active");if(null!=e.previousElementSibling){const t=e.previousElementSibling;t.classList.remove("form__group--inactive"),t.classList.add("form__group--active"),e.classList.remove("form__group--active"),e.classList.add("form__group--inactive"),t.querySelector(".form__input").focus(),validData(),displayBackbutton()}progressIndicator(--progress)}),dropdownItem.forEach(e=>{e.addEventListener("click",()=>{dropdownInput.innerHTML=e.innerHTML,document.querySelector(".form__input--gender-hidden").value=e.textContent})}),dateOfBirthInput.addEventListener("keyup",e=>{"Backspace"!==e.key&&(2!==dateOfBirthInput.value.length&&5!==dateOfBirthInput.value.length||(dateOfBirthInput.value+="-"))})};document.addEventListener("keydown",e=>{"Enter"===e.key&&"submit"!==document.querySelector(".form__group--active .form__input").getAttribute("data-input")?(e.preventDefault(),nextArrowClicked()):"Enter"===e.key&&"submit"===document.querySelector(".form__group--active .form__input").getAttribute("data-input")&&document.querySelector("#form").submit()});const nextArrowClicked=()=>{const e=document.querySelector(".form__group--active"),t=e.nextElementSibling,r=e.querySelector(".form__input");t.querySelector(".form__input").focus(),"first-name"===r.getAttribute("data-input")&&validateFirstName(r)?(nextSlide(e,t),progress=1):"last-name"===r.getAttribute("data-input")?(nextSlide(e,t),progress=2):"email-address"===r.getAttribute("data-input")&&validateEmail(r)?(nextSlide(e,t),progress=3):"age"===r.getAttribute("data-input")&&validateAge(r)?(nextSlide(e,t),progress=4):"gender"===r.getAttribute("data-input")&&validateGender(r)?(nextSlide(e,t),progress=5):"date-of-birth"===r.getAttribute("data-input")&&validateDateOfBirth(r)?(nextSlide(e,t),progress=6):e.style.animation="shake 0.4s ease",e.addEventListener("animationend",()=>{e.style.animation=""}),progressIndicator(progress)},nextSlide=(e,t)=>{e.classList.remove("form__group--active"),e.classList.add("form__group--inactive"),t.classList.remove("form__group--inactive"),t.classList.add("form__group--active"),displayBackbutton()},displayBackbutton=()=>{backButton.classList.remove("btn--disable"),"first-name"===document.querySelector(".form__group--active .form__input").getAttribute("data-input")&&backButton.classList.add("btn--disable")},progressIndicator=e=>{for(let t=1;t<=e;t++)document.querySelector(`.progress__indicator--${t}`).classList.add("progress__indicator--checked");for(let t=e+1;t<=progressIndicators.length;t++)document.querySelector(`.progress__indicator--${t}`).classList.remove("progress__indicator--checked")},validateFirstName=e=>{if(0!==e.value.length)return validData(),!0;invalidData(),errorMessage.innerHTML="First name can't be blank"},validateEmail=e=>{if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(e.value))return validData(),!0;0===e.value.length?(invalidData(),errorMessage.innerHTML="Email address can't be blank"):(invalidData(),errorMessage.innerHTML="Invalid Email address")},validateAge=e=>{if(e.value){if(!(parseInt(e.value)<1||parseInt(e.value)>150))return validData(),!0;invalidData(),errorMessage.innerHTML="Invalid Age"}else invalidData(),errorMessage.innerHTML="Age can't be blank"},validateGender=e=>{if(e.textContent.trim()){if("Select gender"!==e.textContent.trim())return validData(),!0;invalidData(),errorMessage.textContent="Please select a gender"}else invalidData(),errorMessage.textContent="Please select a gender"},validateDateOfBirth=e=>{let t=!1;if(e.value)if(10!==e.value.length||"-"!==e.value[2]||"-"!==e.value[5])invalidData(),errorMessage.innerHTML="Date of birth format should be DD-MM-YYYY";else{const r=e.value.split("-").map(e=>parseInt(e)),a=new Date(r[2],r[1]-1,r[0]);let n=new Date;for(let r=0;r<e.value.length;r++)parseInt(e.value[r])||0===parseInt(e.value[r])||2===r||5===r||(t=!0);if(t)invalidData(),errorMessage.innerHTML="Invalid Date of birth (format DD-MM-YYYY)";else if(a>=Date.now())invalidData(),errorMessage.innerHTML="Date of birth can't be in future";else{if(!(n.getFullYear()-parseInt(r[2])>150))return validData(),!0;invalidData(),errorMessage.innerHTML="Invalid Date of birth"}}else invalidData(),errorMessage.innerHTML="Date of birth can't be blank"},validData=()=>{form.style.animation="gradient-green 2s both",background1.style.animation="gradient-green 1s 1s both",background2.style.animation="gradient-green 1.5s 1s both",dropdownItem.forEach(e=>{e.addEventListener("mouseover",()=>{e.classList.remove("dropdown__item--error")})}),errorMessage.classList.add("error-message--disable")},invalidData=()=>{form.style.animation="gradient-red 2s both",background1.style.animation="gradient-red 0.5s 1s both",background2.style.animation="gradient-red 1s 1s both",dropdownItem.forEach(e=>{e.addEventListener("mouseover",()=>{e.classList.add("dropdown__item--error")}),e.addEventListener("mouseleave",()=>{e.classList.remove("dropdown__item--error")})}),document.querySelector(".form__group--active .form__input").focus(),errorMessage.classList.remove("error-message--disable")};setTimeout(()=>{document.querySelector(".loading").classList.add("loading--disable")},8e3),document.querySelectorAll(".form__input")[0].focus(),displayBackbutton(),document.querySelectorAll(".icon-next").forEach(e=>{e.addEventListener("click",nextArrowClicked)}),backButton.addEventListener("click",()=>{const e=document.querySelector(".form__group--active");if(null!=e.previousElementSibling){const t=e.previousElementSibling;t.classList.remove("form__group--inactive"),t.classList.add("form__group--active"),e.classList.remove("form__group--active"),e.classList.add("form__group--inactive"),t.querySelector(".form__input").focus(),validData(),displayBackbutton()}progressIndicator(--progress)}),dropdownItem.forEach(e=>{e.addEventListener("click",()=>{dropdownInput.innerHTML=e.innerHTML,document.querySelector(".form__input--gender-hidden").value=e.textContent})}),dateOfBirthInput.addEventListener("keyup",e=>{"Backspace"!==e.key&&(2!==dateOfBirthInput.value.length&&5!==dateOfBirthInput.value.length||(dateOfBirthInput.value+="-"))});